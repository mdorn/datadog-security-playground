# Datadog Security Playground

A comprehensive educational security simulation environment designed to demonstrate web application attack methodologies and showcase Datadog's Workload Protection capabilities. This playground provides hands-on experience with real-world attack scenarios in a controlled, safe environment.

## ‚ö†Ô∏è Important Disclaimer

**This is an educational simulation environment!**

- All attack scenarios use **harmless demo binaries** and simulated payloads
- Designed purely for security awareness and educational purposes
- Use only in isolated, controlled environments
- No real malware or actual damage is caused

## üõ†Ô∏è Prerequisites

### Required Tools
- **Helm Charts**: [Installation Guide](https://helm.sh/docs/topics/charts/)
- **Minikube** (optional): [Installation Guide](https://minikube.sigs.k8s.io/docs/start)

### Minikube Setup (optional)

Virtual machine-based Minikube is mandatory for this simulation.

**Option 1 - QEMU Driver:**
```bash
minikube start --driver=qemu
```

**Option 2 - KVM2 Driver:**
```bash
minikube start --driver=kvm2
```

## üöÄ Deployment Guide

### Step 1: Deploy Datadog Agent

1. **Set up API Secret:**
   ```bash
   export DATADOG_API_SECRET_NAME=datadog-api-secret
   ```

2. **Create Datadog API Key Secret:**
   ```bash
   kubectl create secret generic $DATADOG_API_SECRET_NAME --from-literal api-key="<YOUR_DATADOG_API_KEY>"
   ```

3. **Install Datadog Agent:**
   ```bash
   helm install datadog-agent \
     --set datadog.apiKeyExistingSecret=$DATADOG_API_SECRET_NAME \
     --set datadog.site=datadoghq.com \
     -f deploy/datadog-agent.yaml \
     datadog/datadog
   ```

4. **Verify Datadog Agent Deployment:**
   ```bash
   kubectl get pods
   ```
   
   Expected output:
   ```
   NAME                                           READY   STATUS    RESTARTS   AGE
   datadog-agent-cluster-agent-7697f8cf97-mrsrg   1/1     Running   0          2m8s
   datadog-agent-rzxs2                            4/4     Running   0          2m8s
   ```

### Step 2: Deploy Vulnerable PHP Application

1. **Deploy the Application:**
   ```bash
   kubectl apply -f deploy/php-app.yaml
   ```

2. **Wait for Application to be Ready:**
   ```bash
   kubectl get pods
   ```
   
   Expected output:
   ```
   NAME                                           READY   STATUS              RESTARTS   AGE
   datadog-agent-cluster-agent-7697f8cf97-mrsrg   1/1     Running             0          4m18s
   datadog-agent-rzxs2                            4/4     Running             0          4m18s
   php-app-deployment-87b8d4b88-2hmzx             1/1     Running             0          1m30s
   ```

## üéØ Available Attack Scenarios

Navigate to the `scripts/` folder to explore available attack scenarios. Each scenario includes detailed documentation and step-by-step instructions.

### Current Scenarios

#### 1. Cryptocurrency Mining Malware Attack
- **Location**: `scripts/malware/`
- **Description**: Simulates a command injection attack that deploys persistent cryptocurrency mining malware
- **Attack Vector**: Command injection vulnerability
- **Impact**: Resource hijacking, persistence, system compromise
- **Detection**: Workload Protection signals for malware execution, file modifications, and persistence mechanisms

**How to Run:**
```bash
# Execute the attack simulation from within the php-app pod
kubectl exec -it deploy/php-app -- /scripts/malware/detonate.sh --wait
```

## üìä Monitoring and Detection

### Datadog Workload Protection App

After running any attack scenario:

1. **Access Datadog Workload Protection App** in your Datadog dashboard
2. **Review Security Signals** generated by the attack simulation
3. **Analyze Attack Timeline** to understand the attack progression
4. **Examine Detection Rules** that triggered alerts
